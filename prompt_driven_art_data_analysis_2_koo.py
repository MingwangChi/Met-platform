# -*- coding: utf-8 -*-
"""Prompt-driven art data analysis-2-Koo.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1sKmxw5-IF2Q5zv9OaGRecU8W9zsyCj8s
"""

# ì‘í’ˆ ë°ì´í„° ìˆ˜ì§‘ ì˜ˆì‹œ
import requests
import pandas as pd

# 1. í‚¤ì›Œë“œ ê²€ìƒ‰
params = {"q": "landscape", "artistOrCulture": True}
search_url = "https://collectionapi.metmuseum.org/public/collection/v1/search"
response = requests.get(search_url, params=params).json()
object_ids = response.get("objectIDs", [])[:20]

# 2. ì‘í’ˆ ìƒì„¸ì •ë³´ ê°€ì ¸ì˜¤ê¸°
artworks = []
for oid in object_ids:
    obj = requests.get(f"https://collectionapi.metmuseum.org/public/collection/v1/objects/{oid}").json()
    if obj.get("primaryImageSmall"):
        artworks.append({
            "title": obj["title"],
            "artist": obj["artistDisplayName"],
            "year": obj["objectDate"],
            "medium": obj["medium"],
            "image": obj["primaryImageSmall"]
        })

df = pd.DataFrame(artworks)
df.head()

import requests
import pandas as pd

# ì‚¬ìš©ì ì£¼ì œ ì…ë ¥
theme = "flowers"  # í˜¹ì€ input("Enter your theme: ")

# ê²€ìƒ‰
search_url = "https://collectionapi.metmuseum.org/public/collection/v1/search"
params = {"q": theme, "artistOrCulture": True}
res = requests.get(search_url, params=params).json()
object_ids = res.get("objectIDs", [])[:30]

# ìƒì„¸ ìˆ˜ì§‘
artworks = []
for oid in object_ids:
    data = requests.get(f"https://collectionapi.metmuseum.org/public/collection/v1/objects/{oid}").json()
    if data.get("primaryImageSmall"):
        artworks.append({
            "title": data["title"],
            "artist": data["artistDisplayName"],
            "year": data["objectDate"],
            "medium": data["medium"],
            "image": data["primaryImageSmall"]
        })

df = pd.DataFrame(artworks)
df.to_csv("artworks.csv", index=False)

df

"""## Colabì— app.py íŒŒì¼ ìƒì„±"""

with open("app.py", "w") as f:
    f.write('''
import streamlit as st
import pandas as pd

st.set_page_config(page_title="Virtual Art Exhibition", layout="wide")
st.title("ğŸ¨ My Virtual Art Exhibition")
st.caption("Powered by The Met Open Access API")

theme = "flowers"
st.subheader(f"Curated Theme: {theme.capitalize()}")

df = pd.read_csv("artworks.csv")

for i, row in df.iterrows():
    st.image(row["image"], width=300)
    st.markdown(f"**{row['title']}** by *{row['artist']}*")
    st.caption(f"{row['year']} Â· {row['medium']}")
    st.markdown("---")

st.markdown("ğŸ“ _This exhibition explores the symbolic use of flowers in art history..._")
''')

# Commented out IPython magic to ensure Python compatibility.
# 1. Colabì—ì„œ Git ì„¤ì¹˜ ë° ì‚¬ìš©ì ì •ë³´ ë“±ë¡ (ìµœì´ˆ 1íšŒ)
!git config --global user.name "jahwankoo"
!git config --global user.email "jahwankoo@email.com"

# 2. GitHub í† í° ë°œê¸‰ ë°›ì•„ ì‚¬ìš©
# https://github.com/settings/tokens â†’ "classic token" ë°œê¸‰ â†’ repo ê¶Œí•œ ì²´í¬

# 3. Colabì— app.pyì™€ artworks.csv ë§Œë“  ë’¤, GitHubì— ì—…ë¡œë“œ
!git clone https://github.com/jahwankoo/virtual-exhibition.git
# %cd virtual-exhibition

# ë³µì‚¬í•œ íŒŒì¼ ì´ë™
!cp /content/app.py .
!cp /content/artworks.csv .

# GitHubì— ì—…ë¡œë“œ
!git add .
!git commit -m "Add app and artwork data"
!git push https://jahwankoo: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@github.com/jahwankoo/virtual-exhibition.git